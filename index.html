<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>I love you Anna</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background-color: #ffe6e6;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }

    h1 {
      color: #d6336c;
      font-size: 3em;
      text-align: center;
    }

    .buttons {
      margin-top: 20px;
    }

    button {
      padding: 15px 30px;
      margin: 10px;
      font-size: 1.2em;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }

    #yesBtn {
      background-color: #28a745;
      color: white;
    }

    #yesBtn:hover {
      background-color: #218838;
    }

    #noBtn {
      background-color: #dc3545;
      color: white;
      position: absolute;
    }

    #noBtn:hover {
      background-color: #c82333;
    }

    /* Bunny sprite styling */
    /*  
        The original PNG is 160x160 with a 5x5 grid.
        • Each unscaled frame is 32x32.
        • A factor‑5 scale makes each frame 160x160.
        • background-size is set to 800x800 to match the 5x5 grid.
    */
    .bunny {
      width: 160px;  /* scaled-up frame width */
      height: 160px; /* scaled-up frame height */
      background: url('Bunny1.png') 0 0 no-repeat;
      background-size: 800px 800px; /* 5 * 160 = 800 */
      position: absolute;
      top: -160px; /* starts above view so that the fall brings it fully into view */
      animation: fall 3s ease-in-out forwards;
      transform: translateZ(0); /* force hardware acceleration */
    }

    /* Bunny falling animation */
    @keyframes fall {
      0% {
        top: -160px;
      }
      100% {
        top: calc(100vh - 160px);
      }
    }
  </style>
</head>
<body>
  <h1>Do you wanna be my Valentine?<br>(Would make me VERY happy)</h1>
  <div class="buttons">
    <button id="yesBtn" onclick="createBunny()">Yes</button>
    <button id="noBtn">No</button>
  </div>

  <script>
    const bunnyContainer = document.querySelector("body");
    const maxBunnies = 12;
    let bunnyCount = 0;

    // "No" button movement logic
    const noBtn = document.getElementById("noBtn");
    noBtn.addEventListener("mouseover", () => {
      const randomX = Math.floor(Math.random() * (window.innerWidth - noBtn.offsetWidth));
      const randomY = Math.floor(Math.random() * (window.innerHeight - noBtn.offsetHeight));
      noBtn.style.left = `${randomX}px`;
      noBtn.style.top = `${randomY}px`;
    });

    // Create a bunny when "Yes" is clicked
    function createBunny() {
      if (bunnyCount < maxBunnies) {
        const bunny = document.createElement("div");
        bunny.classList.add("bunny");
        bunnyContainer.appendChild(bunny);

        // Set an initial random horizontal position for the bunny
        setRandomStart(bunny);
        bunnyCount++;

        // After the fall (3 seconds) plus a short extra delay (300ms),
        // start the sprite animation and the horizontal movement.
        setTimeout(() => {
          startSpriteAnimation(bunny);
          moveBunnySideways(bunny);
        }, 3300);
      } else {
        alert("Maximum number of bunnies reached!");
      }
    }

    // Set a random horizontal starting position
    function setRandomStart(bunny) {
      const maxX = window.innerWidth - bunny.offsetWidth;
      const randomX = Math.floor(Math.random() * maxX);
      bunny.style.left = `${randomX}px`;
    }

    // Update the bunny's sprite frame at 12 fps.
    function startSpriteAnimation(bunny) {
      const fps = 12; // desired frames per second
      const frameDuration = 1000 / fps; // duration per frame in ms (~83ms)
      const totalFrames = 25;
      let frame = 0;
      
      setInterval(() => {
        // Calculate column and row for the current frame:
        // Frame 0: (0,0), frame 1: (1,0), …, frame 4: (4,0),
        // frame 5: (0,1), etc.
        const col = frame % 5;
        const row = Math.floor(frame / 5);
        const posX = -col * 160; // each frame is 160px wide
        const posY = -row * 160; // each frame is 160px high
        bunny.style.backgroundPosition = `${posX}px ${posY}px`;
        frame = (frame + 1) % totalFrames;
      }, frameDuration);
    }

    // Move the bunny horizontally smoothly over 2.08 seconds,
    // matching the duration of the sprite animation cycle.
    function moveBunnySideways(bunny) {
      const maxX = window.innerWidth - bunny.offsetWidth;
      const targetLeft = Math.floor(Math.random() * maxX);
      // Apply a CSS transition for a smooth move over 2.08 seconds
      bunny.style.transition = "left 2.08s linear";
      bunny.style.left = `${targetLeft}px`;
      // Schedule the next movement after 2.08 seconds.
      setTimeout(() => moveBunnySideways(bunny), 2080);
    }
  </script>
</body>
</html>
















